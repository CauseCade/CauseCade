<div [class.hidden]="ShouldBeHidden" class="mdl-card mdl-shadow--4dp" style="min-height: 50px;margin-top: 12em">
    <div>
        <material-expansionpanel-set>
            <material-expansionpanel name="Set Evidence/Observation">
                <div>
                    <material-input type="number" *ngFor="let value of Probability; let i=index" [(ngModel)]="ObservationList[i]" floatingLabel required label="Value {{i}}"></material-input>
                </div>
                <material-button (click)="setObservation()" raised class="red">Set Observation</material-button>
                <material-button (trigger)="clearObservation()" raised class="red">Clear Observation</material-button>
            </material-expansionpanel>
            <material-expansionpanel name="Set Prior">
                <div>
                    <material-input type="number" *ngFor="let value of Probability; let i=index" [(ngModel)]="PriorList[i]" floatingLabel required label="Value {{i}}"></material-input>
                </div>
                <material-button (trigger)="setPrior()" raised class="red">Set Prior</material-button>
                <material-button (trigger)="clearPrior()" raised class="red">Clear Prior</material-button>
            </material-expansionpanel>
            <material-expansionpanel name="Add Link (new Parent)">
                <div>
                    <material-input floatingLabel  (keyup)="setNewLinkParent($event)" label="Parent Name"></material-input>
                    <material-button (click)="addNewParentLink()" raised class="red">Add Link</material-button>
                </div>
            </material-expansionpanel>
            <material-expansionpanel name="Add Link (new Daughter)">
                <div>
                    <material-input floatingLabel  (keyup)="setNewLinkDaughter($event)" label="Daughter Name"></material-input>
                    <material-button (click)="addNewDaughterLink()" raised class="red">Add Link</material-button>
                </div>
            </material-expansionpanel>
            <material-expansionpanel name="Remove Link">
                <div>
                <material-chips *ngFor="let link of LinkList">
                    <material-chip (click)="removeLink(link)">{{link.getEndPoints()[0].getName()}}<->{{link.getEndPoints()[1].getName()}}</material-chip>
                </material-chips>
                </div>
            </material-expansionpanel>
            <material-expansionpanel name="Set Labels for Node">
                <div>
                    <material-input *ngFor="let label of LabelOld; let i=index"  [(ngModel)]="LabelNew[i]" floatingLabel label="{{LabelOld[i]}}"></material-input>
                </div>
                <material-button (click)="pushNewLabels()" raised class="red">Set Labels</material-button>
            </material-expansionpanel>
            <material-expansionpanel name="Set LinkMatrix">
                <material-button (trigger)="showMatrixEditor = true"
                                 [disabled]="showMatrixEditor"
                                 raised
                                 class="blue">
                    Edit Matrix
                </material-button>
            </material-expansionpanel>
            <material-expansionpanel name="Change Amount of States/Events">
                    <material-input (keyup.enter)="setNewStateCountValue($event)" (blur)="setNewStateCountValue($event)" required label="New Amount"></material-input>
                    <material-button (click)="setNewStateCount()" raised class="red">Set New Amount</material-button>
            </material-expansionpanel>
            <material-expansionpanel name="Debugging + Manual Controls">
                <material-button (click)="updateMatrixLabels()" raised class="red">Update MatrixLabels</material-button>
                <material-button (click)="forceNodeUpdate()" raised class="red">Force Node Update</material-button>
                <material-button (click)="updateEdits()" raised class="red">Update Network</material-button>
                <material-button (click)="printNetworkToConsole()" raised class="red">Print to Console</material-button>
            </material-expansionpanel>
        </material-expansionpanel-set>
    </div>

</div>

<modal [(visible)]="showMatrixEditor">
    <material-dialog headered class="headered-dialog">

        <div header>
            <h3>Edit LinkMatrix</h3>
            <p>This matrix is essential for evidence propagation. Columns should sum to one.</p>
        </div>

        <form (ngSubmit)="onSubmit()" #heroForm="ngForm">
        <table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp">
            <thead>
            <tr >
                <th class="mdl-data-table__cell--non-numeric">Parent States -></th>
                <th *ngFor="let label of MatrixValueLabels" class="mdl-data-table__cell--non-numeric">{{label}}</th>
            </tr>
            </thead>
            {{TestString}}
            <tbody>

                <tr *ngFor="let label of LabelOld; let i=index">
                    <td class="mdl-data-table__cell--non-numeric">P({{label}}|Column)</td>
                    <td *ngFor="let value of MatrixValues[i]; let j=index">
                        <div class="form-group mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <label class="mdl-textfield__label" for="matrix_name">{{value}}</label>
                            <input type="number" class="form-control mdl-textfield__input" id="matrix_name"
                                   [(ngModel)]="LinkMatrix[i][j]"
                                   #matrix_name="ngForm" [ngClass]="controlStateClasses(matrix_name)"
                                   ngControl="matrix_name"
                                   max="1" min="0" step="0.05"
                                   style="width: 40px">
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
            <div footer class="mdl-card__actions mdl-card--border">
                <material-button autoFocus clear-size (trigger)="showMatrixEditor = false">Cancel</material-button>
                <material-button type="submit" (click)="pushNewMatrix()" [disabled]="!heroForm.form.valid" class="green">Add</material-button>
            </div>
        </form>

    </material-dialog>
</modal>